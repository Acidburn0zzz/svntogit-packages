# $Id$
# Maintainer: Thomas Baechler <thomas@archlinux.org>
pkgname=thunderbird-i18n
pkgver=2.0.0.16
pkgrel=1
_languages=be,bg,ca,cs,da,de,el,en-GB,es-AR,es-ES,eu,fi,fr,ga-IE,hu,it,ja,ko,lt,mk,nb-NO,nn-NO,nl,pa-IN,pl,pt-BR,pt-PT,ru,sk,sl,sv-SE,tr,zh-CN,zh-TW
pkgdesc="Language packs for Thunderbird"
arch=(i686 x86_64)
url="http://www.mozilla.com/"
depends=("thunderbird>=$pkgver")
eval conflicts=(mozilla-thunderbird-i18n mozilla-thunderbird-{${_languages}} thunderbird-{${_languages}})
makedepends=('unzip')
eval source=(ftp://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/${pkgver}/linux-i686/xpi/{${_languages}}.xpi)
noextract=($(for i in ${source[@]}; do basename $i; done))
md5sums=('49d503eb59c798c9dc775500f5269606'
         '7aceda32715554a8bff6e184972c4733'
         '6ee8392250927ffd16019bd37f2ad60a'
         '6c01d1d2ff8eaf8d2567d1c78aea702c'
         '91294574e61f7d03c66ad52036e10e19'
         'a9dbd171d9d1d64b3fd2f9e2ea7fd2ef'
         '3ef21ffd38c28ce5cd036c54f41ae806'
         '9e59bd17ea9982bd156a121d47ccbe1c'
         '9b2a0e6cfc06e756d8b1289e1da3dbe9'
         '7f9da5045c489d1ce0fcc9c25d8ac480'
         '5cf473fc28f9e108b724af35cfa1ecce'
         '3c843068c12dff1b3b9a12c406ab1654'
         'c99e357b42f92bc905c9c665716314f6'
         '7828acd38ac7d86a207fccd7bc5b9a44'
         '6922ceffa6014375c08811f43ae2312a'
         'b2a2e5bafee4c31eea480605841e9226'
         'd8ad857f9295ade4f1e81671a91d9995'
         '9136c64ec1922b02e308ff226f8842fc'
         '38fe2f401188db0f6dae34bb9874581a'
         'e86e4926319f1053167788f988024325'
         'f85303c380f147b54e17daac218fbeac'
         '9deb08d45696d17282e94e7bd13c93d8'
         '35a937965377f0f31840f0bd29741662'
         'c66ef8af3ae7ee1de76557065bbcb37c'
         '28071236b085b93cd2a31aa6320fa8b3'
         'ec1605d48c83d878cd0ed900b69488ff'
         '0abf85b85d1637c05227a6e71fc45df1'
         'a3e840a84d84679f2abffb867a3a6aa2'
         'd05aecbbf82c64cbbd439565e42e2e8c'
         'e531acd3d2a0a18957ead3699420245b'
         '6c3d6f4a4f412eb4161a4f8e1a4b7187'
         '78215aa252814b9a2a35f8699981ac12'
         'ea1b2ea3daa02a3e7eca5e1dce005a87'
         'e91a66c8f0ad88bce24a0c0a8b901f7b')

build() {
  cd ${startdir}/src
  for lang in $(echo "${_languages}" | sed 's|,| |g'); do
    unzip -o ${lang}.xpi
    sed -i "s|jar:chrome/${lang}.jar|jar:${lang}.jar|" chrome.manifest || return 1
    install -D -m 644 chrome/${lang}.jar ${startdir}/pkg/usr/lib/thunderbird-${pkgver}/chrome/${lang}.jar || return 1
    install -D -m 644 chrome.manifest ${startdir}/pkg/usr/lib/thunderbird-${pkgver}/chrome/${lang}.manifest || return 1
  done
}
