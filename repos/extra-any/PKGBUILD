# $Id$
# Maintainer: Jan de Groot <jgc@archlinux.org>
# Contributor: Thomas Baechler <thomas@archlinux.org>
pkgname=thunderbird-i18n
pkgver=2.0.0.22
pkgrel=3
pkgdesc="Language packs for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird>=$pkgver")
_url=ftp://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/${pkgver}/linux-i686/xpi/
source=($_url/af.xpi
        $_url/be.xpi
        $_url/bg.xpi
        $_url/ca.xpi
        $_url/cs.xpi
        $_url/da.xpi
        $_url/de.xpi
        $_url/el.xpi
        $_url/en-GB.xpi
        $_url/es-AR.xpi
        $_url/es-ES.xpi
        $_url/eu.xpi
        $_url/fi.xpi
        $_url/fr.xpi
        $_url/ga-IE.xpi
        $_url/he.xpi
        $_url/hu.xpi
        $_url/it.xpi
        $_url/ja.xpi
        $_url/ko.xpi
        $_url/lt.xpi
        $_url/mk.xpi
        $_url/nb-NO.xpi
        $_url/nl.xpi
        $_url/nn-NO.xpi
        $_url/pa-IN.xpi
        $_url/pl.xpi
        $_url/pt-BR.xpi
        $_url/pt-PT.xpi
        $_url/ru.xpi
        $_url/sk.xpi
        $_url/sl.xpi
        $_url/sv-SE.xpi
        $_url/tr.xpi
        $_url/uk.xpi
        $_url/zh-CN.xpi
        $_url/zh-TW.xpi)
md5sums=('14cdb165b85101c885fa2d92a5e66bdb'
         'ef01c967d2cd4597cbcec988be38dc5a'
         '13e111aa3f3299c0bb1030ed6bd82a54'
         '90c22cf0433f3873744d166b2bc97bfb'
         '2eefdc08825a33f6d417c274b01c2f78'
         '9662350c33ceb212bcc809ff48d112f3'
         '30c3e8054eb13324969caed286fbc3de'
         '04bbed1ada59c525ebe957fa7eb70f13'
         'ac457b89c627cfb97f429377075aa340'
         '3386ce5862c79ff0c3fc14c102867cfb'
         '0c36ca8dc60ad36677c7d755cea51825'
         '13d3fbbc50a5f98288f53017d8f6531c'
         '0147231ca6df1701419e56e91623e011'
         'af87c1ebdd52ce28ea397937c4a6dbe0'
         '72692f3718e25ba746672831fed354a3'
         'd9a3fb740f0dace8326ff0339a431eef'
         'c0d345ddd6fd3350dd802574543d807f'
         'b97387743e63378f38e90308b945985d'
         '77d99a16289d9cd87abf1b386a34347b'
         '0a272c68a948dda4acd85edd19443c65'
         '65ff2a924a462cca114dbac032b49b4a'
         'b80a7b93700b26284aaa4f84528974f5'
         '1fa090730e991ea56444b4ec5f68b17e'
         'bf3c2e5759bf1d8bea2419a0e34cf4ce'
         '0ddb68801f207f8d2528da728d4a6363'
         'd4bbb03542414cf3d68a02057b2c42a7'
         'c272b5c6d614d72b7859f0e3de02943e'
         '0247006e44e9d28f984493793cefbe78'
         'eba57d9112b57362816cab44510f1867'
         'ba9754987273ffdd5acca61e3f4b2371'
         '7c4f4c9a70f9381477e2a3ea7a90f691'
         '075dc01f2db8fab3e7bf67b7c41a9352'
         '3dfbc9f9cca0ee53c74887764728aaa2'
         'ba1da5d07fc16b7c598cbfef0f8940f6'
         '26e90aaf0636effda73a3491fd8584f5'
         '88e9e443d30a47c97e904147dcc2acf1'
         '9eada985012a21fdde522ff1158a7023')

build() {
  cd "${srcdir}"
  for langfile in *.xpi; do
    lang=${langfile/.xpi/}
    bsdtar xf ${langfile} || return 1
    sed -i "s|jar:chrome/${lang}.jar|jar:${lang}.jar|" chrome.manifest || return 1
    install -D -m644 chrome/${lang}.jar ${pkgdir}/usr/lib/thunderbird-2.0/chrome/${lang}.jar || return 1
    install -D -m644 chrome.manifest ${pkgdir}/usr/lib/thunderbird-2.0/chrome/${lang}.manifest || return 1
  done
}
