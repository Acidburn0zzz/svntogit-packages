# $Id$
# Maintainer: Jan de Groot <jgc@archlinux.org>
# Contributor: Thomas Baechler <thomas@archlinux.org>
pkgname=thunderbird-i18n
pkgver=2.0.0.23
pkgrel=1
pkgdesc="Language packs for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird>=$pkgver")
_url=ftp://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/${pkgver}/linux-i686/xpi/
source=($_url/af.xpi
        $_url/be.xpi
        $_url/bg.xpi
        $_url/ca.xpi
        $_url/cs.xpi
        $_url/da.xpi
        $_url/de.xpi
        $_url/el.xpi
        $_url/en-GB.xpi
        $_url/es-AR.xpi
        $_url/es-ES.xpi
        $_url/eu.xpi
        $_url/fi.xpi
        $_url/fr.xpi
        $_url/ga-IE.xpi
        $_url/he.xpi
        $_url/hu.xpi
        $_url/it.xpi
        $_url/ja.xpi
        $_url/ko.xpi
        $_url/lt.xpi
        $_url/mk.xpi
        $_url/nb-NO.xpi
        $_url/nl.xpi
        $_url/nn-NO.xpi
        $_url/pa-IN.xpi
        $_url/pl.xpi
        $_url/pt-BR.xpi
        $_url/pt-PT.xpi
        $_url/ru.xpi
        $_url/sk.xpi
        $_url/sl.xpi
        $_url/sv-SE.xpi
        $_url/tr.xpi
        $_url/uk.xpi
        $_url/zh-CN.xpi
        $_url/zh-TW.xpi)
md5sums=('dc136d22de69fb026feb04f015ee7735'
         '9cf3109aebf93aa53e6285ca49b09f8d'
         'ccc2a5d369c6121da4d890eff5fcba3f'
         'ecf19706082edce33b68b7bfd8b8dee8'
         'dd10749225f9e335cb5e1888fd2471c4'
         '390d1707613c65a9edd7dd9b30b4216d'
         '61bd7318abe30bd852ca1b5c4a6527ce'
         'ad4f2dadcb427d34461b57606e29fdb4'
         '95dd94a7069167259a8d60dec25d1c60'
         '2a08a2afc913726a1e0d053a92c010f1'
         'f80a6bd2fd8708ff327eb6a601147ffa'
         '8f5d5c313dbbe47bf29ce6f2a4768da2'
         '38d2db5fd4798b34fd1ddafbd4cb8284'
         'e98e92f7c7c6d6155c5d42322e0febd4'
         'ab30d4244d60a6c48be73439804fcf26'
         'e206d402a49d0179a044a0ff523f7535'
         '912fb7e232b2102d5b8e84fdd42ba6e6'
         'c43ca9b997298ee336edcf4432f4d4d1'
         '96dba8a80e7454d4bae3e2c097c3a200'
         '45a6bf475f3b65ecfa927ffe7ad2f41e'
         '5e8a12a78388a7240595ac19d71532c2'
         'fe342adb54e9c64dc4b98e0c5a3283f0'
         '0b4e3161cba287774478ad78d97a69ca'
         '92bc786732e8d644f3aee9dfb8afee4e'
         '830ce611c23b683cfbe09ab2576ce613'
         '56a8a6e618b53c93abe83c5bf705e5a2'
         '0b9b25af53e26f3375057c792517db46'
         '6ea8c49f0f049aeee22305488fdd2e52'
         'b4fca596ac7a2d425b73e8e02cb83474'
         'd6fb312f98054c9a81972df74f0216b5'
         'c2dfe56bf934fceddd3230191c787f3e'
         'c2ebfc7ef983d5373cd78203e5fb46e2'
         'ce41acc6a92112336c92f3af7f2b4a04'
         'd551c19a04da6d058da9884049811c0d'
         '95bef5959e38597d41ec47bcc11cfde5'
         '9fbd584295ae2e38bb8affdb627fe22f'
         '7ddf9300732bde946f795439311fbae2')

build() {
  cd "${srcdir}"
  for langfile in *.xpi; do
    lang=${langfile/.xpi/}
    bsdtar xf ${langfile} || return 1
    sed -i "s|jar:chrome/${lang}.jar|jar:${lang}.jar|" chrome.manifest || return 1
    install -D -m644 chrome/${lang}.jar ${pkgdir}/usr/lib/thunderbird-2.0/chrome/${lang}.jar || return 1
    install -D -m644 chrome.manifest ${pkgdir}/usr/lib/thunderbird-2.0/chrome/${lang}.manifest || return 1
  done
}
