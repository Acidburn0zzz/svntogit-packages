# $Id$
# Maintainer: Thomas Baechler <thomas@archlinux.org>
pkgname=thunderbird-i18n
pkgver=2.0.0.17
pkgrel=1
_languages=be,bg,ca,cs,da,de,el,en-GB,es-AR,es-ES,eu,fi,fr,ga-IE,hu,it,ja,ko,lt,mk,nb-NO,nn-NO,nl,pa-IN,pl,pt-BR,pt-PT,ru,sk,sl,sv-SE,tr,zh-CN,zh-TW
pkgdesc="Language packs for Thunderbird"
arch=(i686 x86_64)
url="http://www.mozilla.com/"
depends=("thunderbird>=$pkgver")
eval conflicts=(mozilla-thunderbird-i18n mozilla-thunderbird-{${_languages}} thunderbird-{${_languages}})
makedepends=('unzip')
eval source=(ftp://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/${pkgver}/linux-i686/xpi/{${_languages}}.xpi)
md5sums=('5fd7897b8a0db002127d15bacba155a6'
         '5fd582fff13fc460082bed3d6adf6c7e'
         '03061368c08a645974309626d9a4cd20'
         '1463b0bfb9442c5028e682c69def6789'
         '85eeb90de23bfd4860c49f9aab3865ca'
         '963798cffe9eee056b73f555a7b27096'
         '4ba2bcd430cb9d6efc9395fed77e3d7e'
         'b0bc385c3d6c8ae5a8e1a3ac4e8e0146'
         '81c31b97abe0f58222546f75c1d91e7b'
         'e912eb629158f724e4b8a77526281431'
         'f921b4b8cfad83cdc009c022269e2a9e'
         '5befb8708238de5d4e7377fa4b3d993f'
         '820bbe0cf1c8bce2e0f790a9c383c5bc'
         'ef9fae52cbc9238b6038bb5224a02234'
         '6332ef007a8c6c4ffe51dd8a83fdb766'
         '92b63e4842429539bc843c983293370d'
         'b81dc6d93d7662c4a3d9594d2ba38d1d'
         'd2a2f45033ab83c8ca34bcf0b206746a'
         'a29aca4e3d0810febfb4e7fac1c21659'
         '34350cfd35c7ae9230b0d81047e2be5b'
         'b24e5cd9e0cc2a568aa86c87fc317af8'
         '7394d7f0fdc77520efefecd79fdbbfd9'
         '2f70a23df8791d7502567ed65846a376'
         '1099cd04f25b9d1eea91ff860d67aeb8'
         '696ec04e198cf0b8b0aae258a7c5440c'
         '9432c5e0a8e77be3dbd3f6708449bfff'
         '5225aeb0b78d37e733976b2a6368e3e2'
         '9c37aa731cb7fe6c0e4ba3d203ff7ecc'
         '99ab7643194fa2be88cdc007ee126870'
         '332f40f7e65f454d0e4cced6a1be0632'
         '99112f6fa77047d1beceb255d0577884'
         '6d8385713a7d3b78ec78cec3f6eb3671'
         '37cada51b588ac59f2246760da60ad88'
         '8023043422437ec19618a676ce6f6dc0')
noextract=($(for i in ${source[@]}; do basename $i; done))

build() {
  cd ${startdir}/src
  for lang in $(echo "${_languages}" | sed 's|,| |g'); do
    unzip -o ${lang}.xpi
    sed -i "s|jar:chrome/${lang}.jar|jar:${lang}.jar|" chrome.manifest || return 1
    install -D -m 644 chrome/${lang}.jar ${startdir}/pkg/usr/lib/thunderbird-${pkgver}/chrome/${lang}.jar || return 1
    install -D -m 644 chrome.manifest ${startdir}/pkg/usr/lib/thunderbird-${pkgver}/chrome/${lang}.manifest || return 1
  done
}
