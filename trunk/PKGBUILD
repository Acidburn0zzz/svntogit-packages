# $Id$
# Maintainer: Thomas Baechler <thomas@archlinux.org>
pkgname=thunderbird-i18n
pkgver=2.0.0.21
pkgrel=2
_languages=af,be,bg,ca,cs,da,de,el,en-GB,es-AR,es-ES,eu,fi,fr,ga-IE,he,hu,it,ja,ko,lt,mk,nb-NO,nl,nn-NO,pa-IN,pl,pt-BR,pt-PT,ru,sk,sl,sv-SE,tr,uk,zh-CN,zh-TW
pkgdesc="Language packs for Thunderbird"
arch=(i686 x86_64)
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird>=$pkgver")
eval conflicts=(mozilla-thunderbird-i18n mozilla-thunderbird-{${_languages}} thunderbird-{${_languages}})
makedepends=('unzip')
eval source=(ftp://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/${pkgver}/linux-i686/xpi/{${_languages}}.xpi)
noextract=($(for i in ${source[@]}; do basename $i; done))
md5sums=('d9d00ea7f46b003e83829a6cfe26c943'
         'ef230081b39c490c9b0557cf06271f1a'
         'ffc4ae7bdd2d3613547b987b831bf3a5'
         '293748b2f2b11957e294b0fd4f3b8f31'
         '019f315ff7e8e83b55e269337213acaa'
         '4b98b54cc885976dbe0c766dcf1289f5'
         '2c6bf29cead7b9cd629923c4a0efe395'
         'ab33bcb5cde24d0836939977a4b1c5aa'
         '960ecae75d0e19fa7a1997ed3bedd455'
         '40a32636892f7baa330ce52f93498842'
         '2c0f762abb07603855ec7cc5291d6896'
         '12c0a539994a02116ccbf27bb11d6ea0'
         '01b3915ee775a94bdae5d6f603ae7d9a'
         '4c850a768196c50a3dee280f279326c7'
         'cefbe556102a0556376547e135030999'
         '8ed7b2f21afaf8c1fbf003a30529d00d'
         '6f1ecf989bb6fe4f3b86c3ced78a85bc'
         '0b20eae568aa15f2b8f176728e514932'
         '58877fcff007f37f7e86487f2cc1f2c2'
         '24f91566aeb89f47cfdba654762c25d3'
         'b364f487ea71567de6846178282be5cb'
         '2ebef81bc42bcb6674d0605141a7834a'
         '87ae1e549b145f536c52bdef33ad1a5f'
         '38398dafa3f9e09f256772c423499ffc'
         'faac6dcade38bbf843afcac7a96c7bb0'
         '5c8815856afe0a871d9db552ff1c1a38'
         'a15a58e066d910dac3b2f03c5041f490'
         '3acd2be68a14616a5106230c1d73ad5e'
         '369fcfc9e6afe1dca03b341b9e68f2bd'
         '44dd9878ab2bcb801ad809d403619a37'
         '65091d1c21d95a81337b6273edc388bb'
         '8b4f5c7dab1bd6fe9e161164c92f5b58'
         'aa79f0b4ce99a6731c52af9915a82353'
         '717aee8341afe52852103c4e3a5f5bb3'
         'd7c96df1ed11387504a0c9330e586133'
         'dd114190c7191b3f0dd5e647cc027f3f'
         '8312657b10b20b56e40a85265ed4acf5')

build() {
  cd ${srcdir}
  for lang in $(echo "${_languages}" | sed 's|,| |g'); do
    unzip -o ${lang}.xpi
    sed -i "s|jar:chrome/${lang}.jar|jar:${lang}.jar|" chrome.manifest || return 1
    install -D -m 644 chrome/${lang}.jar ${pkgdir}/usr/lib/thunderbird-2.0/chrome/${lang}.jar || return 1
    install -D -m 644 chrome.manifest ${pkgdir}/usr/lib/thunderbird-2.0/chrome/${lang}.manifest || return 1
  done
}
