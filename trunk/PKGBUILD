# $Id$
# Maintainer: Thomas Baechler <thomas@archlinux.org>
pkgname=thunderbird-i18n
pkgver=2.0.0.18
pkgrel=1
_languages=af,be,bg,ca,cs,da,de,el,en-GB,es-AR,es-ES,eu,fi,fr,ga-IE,he,hu,it,ja,ko,lt,mk,nb-NO,nl,nn-NO,pa-IN,pl,pt-BR,pt-PT,ru,sk,sl,sv-SE,tr,uk,zh-CN,zh-TW
pkgdesc="Language packs for Thunderbird"
arch=(i686 x86_64)
url="http://www.mozilla.com/"
depends=("thunderbird>=$pkgver")
eval conflicts=(mozilla-thunderbird-i18n mozilla-thunderbird-{${_languages}} thunderbird-{${_languages}})
makedepends=('unzip')
eval source=(ftp://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/${pkgver}/linux-i686/xpi/{${_languages}}.xpi)
noextract=($(for i in ${source[@]}; do basename $i; done))
md5sums=('8c5aa9715a9697b95579148402899f63'
         '6c7d5258ae969a8c20a0785e5ca97ee8'
         '27846f83b9b531f44d13c3d03df2d77a'
         'a11eef51c81bf4e794785bc2d92d3e54'
         '19aa0def21d9a6acff6bd1ecff4e2038'
         'cb2ebb216f20c63d63a490b0d673b4ce'
         '14ec313dc8edb4a9168262f185c6634a'
         'ff4b9169d83c0d72bbd055d606ac9bb9'
         '232c2e58c464edea01b345b8ab83f53e'
         '224a12739cfb1900d77d4d30980bc2b8'
         '6af9f0e6d4a2027b51acd2748b067b65'
         'c2bad90d7eb403f57288b379473a1c43'
         '62a1d09309b3001f7463e2b3fc67a447'
         '8a1db725222612aea5710e512c531278'
         'e4b794b74d05094f42c74265ffc3b133'
         'a6e68fb13c480265826cd7b00d84f3e9'
         'bc17f062106bdc375ed6e6f6b28cf418'
         '70d8e4f8325fa8c0d4343a1d587fc0f9'
         '841e9e1e7566b43c3fb080139eac7eae'
         '4c8ead62fe596a28d6e36e64c52dd8fc'
         '17584e79e7f67e6973d8c911d501e22f'
         'd13e0024c0e090355aff10325be38380'
         '5102a77ddb8d31af4f44e1cf911ba920'
         'db24d94483af567d9688ed96c8d56a8e'
         '22f71682dd01123869140e11b9ddb4e4'
         '27eb71e64a05bbd9f0401efff77fc08f'
         '7364dd303b9c715d8c361620971f430d'
         '25d7ce49c160f26c49fa0c952d0ac148'
         'b9c5c14ee7d5eda7a0ca2c391fbef9f4'
         'cf7b5f0cacd7d30075a8f0e8dc677877'
         '1b18f2adaad902c1b159562d49017309'
         '901afba5fe0e32044d750f4422b5821f'
         '8de4bc356dfbf82dd3e4f0d811363f0d'
         'f1c0834a00da005728f7742f750006da'
         'db0e279655777161409d3aaf772c90cc'
         'a03e4f7972a014c36589cc6411f21e60'
         '2c1a7740169f51f0970ed0a92deb9f0d')

build() {
  cd ${srcdir}
  for lang in $(echo "${_languages}" | sed 's|,| |g'); do
    unzip -o ${lang}.xpi
    sed -i "s|jar:chrome/${lang}.jar|jar:${lang}.jar|" chrome.manifest || return 1
    install -D -m 644 chrome/${lang}.jar ${pkgdir}/usr/lib/thunderbird-2.0/chrome/${lang}.jar || return 1
    install -D -m 644 chrome.manifest ${pkgdir}/usr/lib/thunderbird-2.0/chrome/${lang}.manifest || return 1
  done
}
