# $Id$
# Maintainer: Thomas Baechler <thomas@archlinux.org>
pkgname=thunderbird-i18n
pkgver=2.0.0.19
pkgrel=1
_languages=af,be,bg,ca,cs,da,de,el,en-GB,es-AR,es-ES,eu,fi,fr,ga-IE,he,hu,it,ja,ko,lt,mk,nb-NO,nl,nn-NO,pa-IN,pl,pt-BR,pt-PT,ru,sk,sl,sv-SE,tr,uk,zh-CN,zh-TW
pkgdesc="Language packs for Thunderbird"
arch=(i686 x86_64)
url="http://www.mozilla.com/"
depends=("thunderbird>=$pkgver")
eval conflicts=(mozilla-thunderbird-i18n mozilla-thunderbird-{${_languages}} thunderbird-{${_languages}})
makedepends=('unzip')
eval source=(ftp://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/${pkgver}/linux-i686/xpi/{${_languages}}.xpi)
noextract=($(for i in ${source[@]}; do basename $i; done))
md5sums=('aec98eb78542551d9041c645ae8bd3e7'
         'b16b03b97ef06ab5bdbcb33e2a990a5c'
         '4d7a3836e076cb5186d99ded94d494ac'
         'd82f29a00f4629b63d2b3be291984a2b'
         'a6c164692b95b9cc477a5ea25fa1422b'
         '7d10fd06521998a59c03511fc811704d'
         '58e9cbfab70f3d0b6abdcbeaef8d4374'
         'e40f5e720e7f74871c9b5a7e47af5f58'
         'd58e172899be5d19b50345d8963b73b4'
         '90c8cd8405da0744e7d7e87e47d44785'
         'f519fe7800bd3dfe7fd88c78ad2a1478'
         '03e5a60ca813dbb47b7594dc485f4561'
         '36f3f6bda6b21d0775420d7820e5bb80'
         '6a6a52ce37218f28ba4f74c537fcac9b'
         'c0ce3f82eacfcf09c6139edba7dc1883'
         'a9fb10805a94cf9cd075f30a2f55d6fa'
         '108f382bd656f228ca9c11d3b0a59d7f'
         'e55603e803d65bf82b00f840a0f11fce'
         '8954c6c85736b070426efb66b217758c'
         'bf81b14d2d779acba1a359fc7cfedaa8'
         '7f0b36fd3600d8be993b84634536b363'
         'af3f96f2adc54d3741d2e4f8418e4689'
         'da807bf99b906300de31d299527a72f7'
         '7a60b537b0cc78bedada66e29dd67dcf'
         'b77dedf05082326b4134eb6eba9b73a4'
         '209137a99dbf3cf455d4f5b72219c7f3'
         '8c3eb0a6fd157fadcbc02cc52aeb4ba0'
         '6f4a789c6bbda6909726b5bdbc350306'
         '29e511b94f3ac08bc0f48f5ec7d54d51'
         'a67b97d8ce2c9fd90c854992eaafff2e'
         '3db760848b84239c46cd72eb30990e56'
         '25f22a6f220bcf936729e646e9b5cb04'
         '1b9a22275de8f19969867b4173971726'
         '36d8211e251a89b38054fac5a3a0c354'
         '86ddad7289465ba3a4afe07616a86ada'
         '672af338823f1946ef00b7da53533cb3'
         '19c3c1a8a32f8660a0ef8650fb9986ad')

build() {
  cd ${srcdir}
  for lang in $(echo "${_languages}" | sed 's|,| |g'); do
    unzip -o ${lang}.xpi
    sed -i "s|jar:chrome/${lang}.jar|jar:${lang}.jar|" chrome.manifest || return 1
    install -D -m 644 chrome/${lang}.jar ${pkgdir}/usr/lib/thunderbird-2.0/chrome/${lang}.jar || return 1
    install -D -m 644 chrome.manifest ${pkgdir}/usr/lib/thunderbird-2.0/chrome/${lang}.manifest || return 1
  done
}
